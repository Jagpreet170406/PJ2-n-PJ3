{% extends "base.html" %}

{% block content %}
<style>
    /* Your Car Dood Styling */
    .cart-container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; font-family: sans-serif; }
    .cart-layout { display: grid; grid-template-columns: 1fr; gap: 2rem; }
    @media (min-width: 1024px) { .cart-layout { grid-template-columns: 2fr 1fr; } }
    .cart-section, .order-summary { background: white; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 2rem; }
    .cart-item { border-bottom: 1px solid #eee; padding: 1rem 0; display: flex; gap: 1rem; align-items: center; }
    .item-image { width: 100px; height: 100px; object-fit: cover; border-radius: 8px; }
    .summary-total { font-size: 1.5rem; font-weight: bold; margin: 1.5rem 0; display: flex; justify-content: space-between; }
    .checkout-btn { width: 100%; background: #2563eb; color: white; border: none; padding: 1rem; border-radius: 0.5rem; font-weight: bold; cursor: pointer; }
    .payment-box { margin-top: 1.5rem; border-top: 1px solid #eee; pt: 1rem; }
    .form-control { width: 100%; padding: 0.7rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 4px; }
</style>

<div class="cart-container">
    <h1>üõ†Ô∏è Your Cart</h1>
    <div class="cart-layout">
        <div class="cart-section">
            <div id="cartItems"></div>
        </div>

        <div class="order-summary">
            <h3>Order Summary</h3>
            <div class="summary-total">
                <span>Total</span>
                <span id="totalDisplay">$0.00</span>
            </div>

            <div class="payment-box">
                <form action="{{ url_for('process_payment') }}" method="POST">
                    <label>Payment Method</label>
                    <select name="payment_method" class="form-control" required>
                        <option value="NETS">NETS</option>
                        <option value="VISA">VISA</option>
                        <option value="Grab Pay">Grab Pay</option>
                        <option value="Google Pay">Google Pay</option>
                        <option value="JCB">JCB</option>
                        <option value="AMEX">AMEX</option>
                    </select>

                    <label>Card Number</label>
                    <input type="password" name="card_number" class="form-control" placeholder="1234 5678 ..." required>
                    
                    <input type="hidden" name="total_amount" id="hiddenTotal">
                    <button type="submit" class="checkout-btn">Confirm Purchase</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    let cart = [
        { id: 1, name: 'Performance Exhaust', price: 1250, image: 'https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=200' },
        { id: 2, name: 'Brake Pads Set', price: 350, image: 'https://images.unsplash.com/photo-1610293806573-9e7b7f9fc8c2?w=200' }
    ];

    function renderCart() {
        const div = document.getElementById('cartItems');
        div.innerHTML = cart.map(item => `
            <div class="cart-item">
                <img src="${item.image}" class="item-image">
                <div>
                    <h4>${item.name}</h4>
                    <p>$${item.price.toLocaleString()}</p>
                </div>
            </div>
        `).join('');

        const total = cart.reduce((sum, i) => sum + i.price, 0);
        document.getElementById('totalDisplay').textContent = `$${total.toLocaleString()}`;
        document.getElementById('hiddenTotal').value = total;
    }
    renderCart();
</script>
{% endblock %}
